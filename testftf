local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/deividcomsono/Obsidian/refs/heads/main/Library.lua"))()

local Window = Library:CreateWindow({
    Title = "Riftware - FTF",
    Footer = "If you need support, have a question or have a request make a ticket in #Tickets in the Discord!",
    ToggleKeybind = Enum.KeyCode.RightControl,
    Center = true,
    AutoShow = true
})


-- Startup Notif Success --
Library:Notify({
    Title = "Riftware - FTF",
    Description = "Riftware loaded successfully! ‚úÖ",
    Time = 5, -- Duration in seconds
    SoundId = nil -- Optional sound ID
})

-----------------------------------------------------------------------------------------------------

-- Services --
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local DefaultPosition = HumanoidRootPart.CFrame
local Gravity = Workspace.Gravity
local ReplicatedFirst = game:GetService("ReplicatedFirst")
local Lighting = game:GetService("Lighting")     
local Camera = Workspace.CurrentCamera    
local PathfindingService = game:GetService("PathfindingService")

-- Tabs --
local PlayerTab = Window:AddTab("Player", "user")
local SurvivorTab = Window:AddTab("Survivor", "shield-plus")
local BeastTab = Window:AddTab("Beast", "aperture")
local MiscTab = Window:AddTab("Misc", "wrench")
local CreditsTab = Window:AddTab("Credits & Support", "users")

-- Fix Player Toggles Dont Work On Death --
-- Make Sure Flight Keeps Working After Death -- 
LocalPlayer.CharacterAdded:Connect(function(char)
    Character = char
    Humanoid = Character:WaitForChild("Humanoid")
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
    Camera = Workspace.CurrentCamera

    -- Reapply Walkspeed & Jumppower
    if CustomWalkspeedEnabled then
        Humanoid.WalkSpeed = CurrentWalkspeed
    end
    if CustomJumpEnabled then
        Humanoid.JumpPower = CurrentJumpPower
    end

    -- Reapply Fly if enabled
    if FlyEnabled then
        Humanoid.PlatformStand = true

        FlyBodyVelocity = Instance.new("BodyVelocity")
        FlyBodyVelocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
        FlyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
        FlyBodyVelocity.Parent = HumanoidRootPart

        FlyBodyGyro = Instance.new("BodyGyro")
        FlyBodyGyro.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
        FlyBodyGyro.CFrame = HumanoidRootPart.CFrame
        FlyBodyGyro.Parent = HumanoidRootPart

        FlyConnection = RunService.RenderStepped:Connect(function()
            local moveDir = Vector3.new(0, 0, 0)

            if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                moveDir = moveDir + Camera.CFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                moveDir = moveDir - Camera.CFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                moveDir = moveDir - Camera.CFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                moveDir = moveDir + Camera.CFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                moveDir = moveDir + Vector3.new(0, 1, 0)
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                moveDir = moveDir - Vector3.new(0, 1, 0)
            end

            if moveDir.Magnitude > 0 then
                FlyBodyVelocity.Velocity = moveDir.Unit * FlySpeedValue
            else
                FlyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
            end

            FlyBodyGyro.CFrame = CFrame.new(HumanoidRootPart.Position, HumanoidRootPart.Position + Camera.CFrame.LookVector)
        end)
    end
end)




-- Globals for state (add near top, after services)
getgenv().InvisEnabled = false
getgenv().InvisConnection = nil  -- To store the one-time respawn handler

-- One-time respawn handler for invis (connect once)
if not getgenv().InvisConnection then
    getgenv().InvisConnection = LocalPlayer.CharacterAdded:Connect(function(newChar)
        task.wait(0.5)  -- Slightly safer wait
        if getgenv().InvisEnabled and newChar then
            local char = newChar
            for _, v in pairs(char:GetChildren()) do
                if v:IsA("BasePart") and v.Name ~= "HumanoidRootPart" then
                    v.Transparency = 1
                    v.LocalTransparencyModifier = 1
                    v.CanCollide = false
                elseif v:IsA("Accessory") then
                    v:Destroy()
                end
            end
            local face = char:FindFirstChild("Head") and char.Head:FindFirstChild("face")
            if face and face:IsA("Decal") then
                face.Texture = "rbxasset://textures/face.png"
            end
        end
    end)
end

-- The toggle itself
local InvisToggle = PlayerTab:AddToggle("Invisibility", {
    Text = "Invisibility",
    Default = false,
    Tooltip = "Make yourself invisible (local + noclip). Beast sees nothing!",
    Callback = function(Value)
        getgenv().InvisEnabled = Value
        local char = LocalPlayer.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end

        if Value then
            -- Apply now
            for _, v in pairs(char:GetChildren()) do
                if v:IsA("BasePart") and v.Name ~= "HumanoidRootPart" then
                    v.Transparency = 1
                    v.LocalTransparencyModifier = 1
                    v.CanCollide = false
                elseif v:IsA("Accessory") then
                    v:Destroy()
                end
            end
            local face = char:FindFirstChild("Head") and char.Head:FindFirstChild("face")
            if face and face:IsA("Decal") then
                face.Texture = "rbxasset://textures/face.png"
            end
        else
            -- Revert now (accessories auto-respawn on animation load usually)
            for _, v in pairs(char:GetChildren()) do
                if v:IsA("BasePart") then
                    v.Transparency = 0
                    v.LocalTransparencyModifier = 0
                    v.CanCollide = true
                end
            end
        end
    end
})
-----------------------------------------------------------------------------------------------------

-- Player Tab Content --

-- Boxes --
local PlayerLegitBox = PlayerTab:AddLeftGroupbox("Legit", "smile")
local PlayerRageBox = PlayerTab:AddRightGroupbox("Rage", "angry")

-- Legit Box Content --

-- Walkspeed --
local CustomWalkspeedEnabled = false
local CurrentWalkspeed = 16

-- Walkspeed Toggle
local Walkspeed = PlayerLegitBox:AddToggle("Walkspeed", {
    Text = "Enable Walkspeed",
    Default = false,
    Tooltip = "Enable/Disable custom Walkspeed.",
    Callback = function(Value)
        CustomWalkspeedEnabled = Value
        if not Value then
            Humanoid.WalkSpeed = 16 -- Reset to default when disabled
        end
    end
})

-- Walkspeed Slider
local WalkspeedEdit = PlayerLegitBox:AddSlider("WalkspeedEdit", {
    Text = "Walkspeed",
    Default = 16,
    Min = 16,
    Max = 250,
    Tooltip = "Adjust the speed of your custom Walkspeed.",
    Rounding = 0,
    Compact = false,
    Callback = function(Value)
        CurrentWalkspeed = Value
    end
})

-- Constantly enforce Walkspeed
RunService.RenderStepped:Connect(function()
    if CustomWalkspeedEnabled and Humanoid and Humanoid.Health > 0 then
        Humanoid.WalkSpeed = CurrentWalkspeed
    end
end)

--------------------------------------------------------------------------------------------------------

PlayerLegitBox:AddDivider()

-- Variables
local CustomJumpEnabled = false
local CurrentJumpPower = 36

-- Jumppower Toggle
local Jumppower = PlayerLegitBox:AddToggle("Jumppower", {
    Text = "Enable Jumppower",
    Default = false,
    Tooltip = "Enable/Disable custom Jumppower.",
    Callback = function(Value)
        CustomJumpEnabled = Value
        if not Value then
            Humanoid.JumpPower = 36 -- Reset to default when disabled
        end
    end
})

-- Jumppower Slider
local JumppowerEdit = PlayerLegitBox:AddSlider("JumppowerEdit", {
    Text = "Jumppower",
    Default = 36,
    Min = 36,
    Max = 250,
    Tooltip = "Adjust the power of your custom Jumppower.",
    Rounding = 0,
    Compact = false,
    Callback = function(Value)
        CurrentJumpPower = Value
    end
})

-- Constantly enforce Jumppower
RunService.RenderStepped:Connect(function()
    if CustomJumpEnabled and Humanoid and Humanoid.Health > 0 then
        Humanoid.JumpPower = CurrentJumpPower
    end
end)


-- Rage Box Content --

-- Fly --
local FlyEnabled = false
local FlySpeedValue = 16
local FlyBodyVelocity = nil
local FlyBodyGyro = nil
local FlyConnection = nil

-- Fly Toggle
local Fly = PlayerRageBox:AddToggle("Fly", {
    Text = "Enable Flight",
    Default = false,
    Tooltip = "Enable/Disable Flight.",
    Callback = function(Value)
        FlyEnabled = Value

        if Value then
            -- Lock the humanoid
            Humanoid.PlatformStand = true

            -- BodyVelocity for movement
            FlyBodyVelocity = Instance.new("BodyVelocity")
            FlyBodyVelocity.MaxForce = Vector3.new(1e5,1e5,1e5)
            FlyBodyVelocity.Velocity = Vector3.new(0,0,0)
            FlyBodyVelocity.Parent = HumanoidRootPart

            -- BodyGyro to lock rotation
            FlyBodyGyro = Instance.new("BodyGyro")
            FlyBodyGyro.MaxTorque = Vector3.new(1e5,1e5,1e5)
            FlyBodyGyro.CFrame = HumanoidRootPart.CFrame
            FlyBodyGyro.Parent = HumanoidRootPart

            -- Fly loop
            FlyConnection = RunService.RenderStepped:Connect(function()
                local moveDir = Vector3.new(0,0,0)

                if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                    moveDir = moveDir + Camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                    moveDir = moveDir - Camera.CFrame.LookVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                    moveDir = moveDir - Camera.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                    moveDir = moveDir + Camera.CFrame.RightVector
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                    moveDir = moveDir + Vector3.new(0,1,0)
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                    moveDir = moveDir - Vector3.new(0,1,0)
                end

                -- Apply velocity
                if moveDir.Magnitude > 0 then
                    FlyBodyVelocity.Velocity = moveDir.Unit * FlySpeedValue
                else
                    FlyBodyVelocity.Velocity = Vector3.new(0,0,0)
                end

                -- Lock orientation to camera forward
                FlyBodyGyro.CFrame = CFrame.new(HumanoidRootPart.Position, HumanoidRootPart.Position + Camera.CFrame.LookVector)
            end)

        else
            -- Disable flight
            Humanoid.PlatformStand = false
            if FlyConnection then
                FlyConnection:Disconnect()
                FlyConnection = nil
            end
            if FlyBodyVelocity then
                FlyBodyVelocity:Destroy()
                FlyBodyVelocity = nil
            end
            if FlyBodyGyro then
                FlyBodyGyro:Destroy()
                FlyBodyGyro = nil
            end
        end
    end
})

-- FlySpeed Slider
local FlySpeed = PlayerRageBox:AddSlider("FlySpeed", {
    Text = "Flight Speed",
    Default = 16,
    Min = 16,
    Max = 500,
    Tooltip = "Adjust the speed of your Flight.",
    Rounding = 0,
    Compact = false,
    Callback = function(Value)
        FlySpeedValue = Value
    end
})


---------------------------------------------------------------------------------------------------------------------------------------------

PlayerRageBox:AddDivider()

-- Noclip --

local NoclipEnabled = false

-- Noclip Toggle in Obsidian UI
local Noclip = PlayerRageBox:AddToggle("Noclip", {
    Text = "Noclip (Beta)",
    Default = false,
    Tooltip = "Enable/Disable Noclip.",
    Callback = function(Value)
        NoclipEnabled = Value
    end
})

-- RunService loop to enforce noclip while toggle is on
RunService.Stepped:Connect(function()
    if NoclipEnabled and Character then
        for _, part in pairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)
--------------------------------------------------------------------------------------------------------------------------------------------------

-- Survivor Tab Content --

-- Boxes --
local SurvivorESPBox = SurvivorTab:AddLeftGroupbox("ESP", "eye")
local ComputerCorrect = SurvivorTab:AddRightGroupbox("Computer", "laptop-minimal")
local SafeZoneBox = SurvivorTab:AddLeftGroupbox("Safezone", "shield")
local SurvivorNotifBox = SurvivorTab:AddRightGroupbox("Notifications", "message-square-more")
-- ESP Box Content --
-- Beast ESP --
local BeastESPConnection = nil
local currentBeast = nil

local BeastESP = SurvivorESPBox:AddToggle("BeastESP", {
    Text = "Hightlight Beast",
    Default = false,
    Tooltip = "Highlights the current beast.",
    Callback = function(Value)
        if Value then
            -- Notify once when turned on
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Beast ESP Enabled ‚úÖ",
                Time = 3
            })

            local function updateBeast()
                local found = nil

                for _, plr in pairs(Players:GetPlayers()) do
                    local stats = plr:FindFirstChild("TempPlayerStatsModule")
                    if stats then
                        local beastTag = stats:FindFirstChild("IsBeast") -- specifically look for the correct BoolValue
                        if beastTag and beastTag.Value then
                            found = plr
                            break
                        end
                    end
                end

                -- Remove old highlights if no beast
                if not found then
                    if currentBeast then
                        for _, p in pairs(Players:GetPlayers()) do
                            if p.Character then
                                for _, c in pairs(p.Character:GetChildren()) do
                                    if c:IsA("Highlight") and c.Name == "BeastESPHighlight" then
                                        c:Destroy()
                                    end
                                end
                            end
                        end
                        currentBeast = nil
                    end
                    return
                end

                -- Check if we need to create a new highlight
                local needsCreate = currentBeast ~= found or not (found.Character and found.Character:FindFirstChild("BeastESPHighlight"))

                if needsCreate then
                    -- Clean all previous highlights
                    for _, p in pairs(Players:GetPlayers()) do
                        if p.Character then
                            for _, c in pairs(p.Character:GetChildren()) do
                                if c:IsA("Highlight") and c.Name == "BeastESPHighlight" then
                                    c:Destroy()
                                end
                            end
                        end
                    end

                    -- Create new highlight on the current beast
                    if found.Character and found.Character:FindFirstChild("HumanoidRootPart") then
                        local hi = Instance.new("Highlight")
                        hi.Name = "BeastESPHighlight"
                        hi.FillColor = Color3.fromRGB(255, 0, 0)        -- red
                        hi.FillTransparency = 0.25
                        hi.OutlineTransparency = 1                     -- removes white outline
                        hi.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                        hi.Parent = found.Character
                    end

                    currentBeast = found
                end
            end

            updateBeast()
            BeastESPConnection = RunService.Heartbeat:Connect(updateBeast)
        else
            -- Notify once when turned off
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Beast ESP Disabled ‚ùå",
                Time = 3
            })

            if BeastESPConnection then
                BeastESPConnection:Disconnect()
                BeastESPConnection = nil
            end

            currentBeast = nil
            for _, p in pairs(Players:GetPlayers()) do
                if p.Character then
                    for _, c in pairs(p.Character:GetChildren()) do
                        if c:IsA("Highlight") and c.Name == "BeastESPHighlight" then
                            c:Destroy()
                        end
                    end
                end
            end
        end
    end
})


getgenv().Settings = getgenv().Settings or {}
getgenv().Settings.Anti_Failure = false
getgenv().Settings.Method = getgenv().Settings.Method or "Event"

local rep = game:GetService("ReplicatedStorage")         

local enabled = false

local ComputerAlwaysCorrect = ComputerCorrect:AddToggle("ComputerAlwaysCorrect", {
    Text = "Disable Failure",
    Default = false,
    Tooltip = "Never fail a computer again.",
    Callback = function(Value)
        getgenv().Settings.Anti_Failure = Value
        
        if getgenv().Settings.Method == "Metamethod" then
            enabled = getgenv().Settings.Anti_Failure
        elseif getgenv().Settings.Method == "Event" then
            if Value then
                coroutine.wrap(function()
                    while getgenv().Settings.Anti_Failure 
                       and getgenv().Settings.Method == "Event" do
                        
                        rep.RemoteEvent:FireServer("SetPlayerMinigameResult", true)
                        task.wait()   -- or task.wait(0.03) if you want to reduce spam a tiny bit
                    end
                end)()
            end
            -- Optional: you could add an "else" to stop existing loops, but the while condition already kills them
        end
    end
})

-------------------------------------------------------------------------------------------------------------------------------

local ComputerESPConnection = nil
local computerLastCheck = 0

local ComputerESP = SurvivorESPBox:AddToggle("ComputerESP", {
    Text = "Highlight Computers",
    Default = false,
    Tooltip = "Highlights all computers.",
    Callback = function(Value)
        if Value then
            -- Notify once when turned on
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Computer ESP Enabled ‚úÖ",
                Time = 3
            })

            local function updateComputers()
                -- Remove old highlights first
                for _, map in pairs(Workspace:GetChildren()) do
                    if map:IsA("Model") then
                        for _, obj in pairs(map:GetChildren()) do
                            if obj:IsA("Model") and obj.Name == "ComputerTable" then
                                local old = obj:FindFirstChild("ComputerESPHighlight")
                                if not old then
                                    local hi = Instance.new("Highlight")
                                    hi.Name = "ComputerESPHighlight"
                                    hi.FillColor = Color3.fromRGB(0, 255, 0) -- bright green
                                    hi.FillTransparency = 0.25
                                    hi.OutlineTransparency = 1 -- no white outline
                                    hi.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                                    hi.Parent = obj
                                end
                            end
                        end
                    end
                end
            end

            -- Run once immediately
            updateComputers()

            ComputerESPConnection = RunService.Heartbeat:Connect(function(deltaTime)
                computerLastCheck = computerLastCheck + deltaTime
                if computerLastCheck >= 1 then -- every 1 second
                    updateComputers()
                    computerLastCheck = 0
                end
            end)

        else
            -- Notify once when turned off
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Computer ESP Disabled ‚ùå",
                Time = 3
            })

            if ComputerESPConnection then
                ComputerESPConnection:Disconnect()
                ComputerESPConnection = nil
            end

            -- Remove all highlights
            for _, map in pairs(Workspace:GetChildren()) do
                if map:IsA("Model") then
                    for _, obj in pairs(map:GetChildren()) do
                        if obj:IsA("Model") and obj.Name == "ComputerTable" then
                            local hi = obj:FindFirstChild("ComputerESPHighlight")
                            if hi then
                                hi:Destroy()
                            end
                        end
                    end
                end
            end
        end
    end
})

------------------------------------------------------------------------------------------------

local ExitESPConnection = nil
local exitLastCheck = 0

local ExitESP = SurvivorESPBox:AddToggle("ExitESP", {
    Text = "Highlight Exit Doors",
    Default = false,
    Tooltip = "Highlights all Exit Doors.",
    Callback = function(Value)
        if Value then
            -- Notify turned on
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Exit Door ESP enabled ‚úÖ",
                Time = 5
            })

            local function updateExits()
                -- Highlight all exit doors
                for _, map in pairs(Workspace:GetChildren()) do
                    if map:IsA("Model") then
                        for _, obj in pairs(map:GetChildren()) do
                            if obj:IsA("Model") and obj.Name == "ExitDoor" then
                                local old = obj:FindFirstChild("ExitESPHighlight")
                                if not old then
                                    local hi = Instance.new("Highlight")
                                    hi.Name = "ExitESPHighlight"
                                    hi.FillColor = Color3.fromRGB(255, 255, 0) -- yellow
                                    hi.FillTransparency = 0.25
                                    hi.OutlineTransparency = 1 -- removes white outline
                                    hi.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                                    hi.Parent = obj
                                end
                            end
                        end
                    end
                end
            end

            updateExits()

            ExitESPConnection = RunService.Heartbeat:Connect(function(deltaTime)
                exitLastCheck = exitLastCheck + deltaTime
                if exitLastCheck >= 1 then -- every 1 second
                    updateExits()
                    exitLastCheck = 0
                end
            end)

        else
            -- Notify turned off
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Exit Door ESP disabled ‚ùå",
                Time = 5
            })

            if ExitESPConnection then
                ExitESPConnection:Disconnect()
                ExitESPConnection = nil
            end

            -- Remove all exit highlights
            for _, map in pairs(Workspace:GetChildren()) do
                if map:IsA("Model") then
                    for _, obj in pairs(map:GetChildren()) do
                        if obj:IsA("Model") and obj.Name == "ExitDoor" then
                            local hi = obj:FindFirstChild("ExitESPHighlight")
                            if hi then
                                hi:Destroy()
                            end
                        end
                    end
                end
            end
        end
    end
})

----------------------------------------------------------------------------------------------------------------------------------------------------

-- Safezone Box Content --
local safeZonePos = Vector3.new(154, 230, 165) -- where the player will teleport
local safeZonePartPos = Vector3.new(154, 223, 165) -- part that marks the safe zone
local inSafeZone = false
local originalCFrame = nil
local safeZonePart = nil

local SafeZoneTP = SafeZoneBox:AddButton({
    Text = "Teleport to Safe Zone",
    Tooltip = "Click once to TP to safe zone, click again to TP back to original position.",
    Func = function()
        local character = LocalPlayer.Character
        local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
        if not humanoidRootPart then return end

        if not inSafeZone then
            -- Save original position
            originalCFrame = humanoidRootPart.CFrame

            -- Create marker part at safe zone (optional visual marker)
            if not safeZonePart then
                safeZonePart = Instance.new("Part")
                safeZonePart.Size = Vector3.new(4, 1, 4)
                safeZonePart.Anchored = true
                safeZonePart.CanCollide = true
                safeZonePart.Position = safeZonePartPos
                safeZonePart.Transparency = 0.5
                safeZonePart.BrickColor = BrickColor.new("Bright green")
                safeZonePart.Parent = Workspace
            end

            -- Teleport player to safe zone
            humanoidRootPart.CFrame = CFrame.new(safeZonePos)
            inSafeZone = true

            -- Notify player
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Teleported to Safe Zone ‚úÖ",
                Time = 3
            })

        else
            -- Teleport back to original position
            if originalCFrame then
                humanoidRootPart.CFrame = originalCFrame
            end
            inSafeZone = false

            -- Notify player
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Returned to Original Position ‚úÖ",
                Time = 3
            })
        end
    end,
})

----------------------------------------------------------------------------------------------------------------------------------------------------

-- Survivor Notif Box Content --
local NearBeastEnabled = false
local NearBeastNotified = false
local notifyDistance = 50 -- studs

local NearBeast = SurvivorNotifBox:AddToggle("NearBeast", {
    Text = "Near Beast Notification",
    Default = false,
    Tooltip = "Sends a Notification if the Beast gets too close.",
    Callback = function(Value)
        NearBeastEnabled = Value
        NearBeastNotified = false -- reset

        if Value then
            -- Notify enabled
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Near Beast Notifications Enabled ‚úÖ",
                Time = 3
            })
        else
            -- Notify disabled
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Near Beast Notifications Disabled ‚ùå",
                Time = 3
            })
        end
    end
})

-- Run loop to check distance while toggle is on
RunService.Heartbeat:Connect(function()
    if not NearBeastEnabled then return end

    local character = LocalPlayer.Character
    local hrp = character and character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local beastPlayer = nil

    -- Find current beast
    for _, plr in pairs(Players:GetPlayers()) do
        local stats = plr:FindFirstChild("TempPlayerStatsModule")
        if stats then
            local beastTag = stats:FindFirstChild("IsBeast")
            if beastTag and beastTag.Value then
                beastPlayer = plr
                break
            end
        end
    end

    if beastPlayer and beastPlayer.Character and beastPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local distance = (hrp.Position - beastPlayer.Character.HumanoidRootPart.Position).Magnitude

        if distance <= notifyDistance and not NearBeastNotified then
            -- Send Obsidian notification once
            NearBeastNotified = true
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Beast is nearby! Watch out! ‚ö†Ô∏è",
                Time = 5
            })
        elseif distance > notifyDistance then
            -- Reset notification trigger when beast moves away
            NearBeastNotified = false
        end
    else
        NearBeastNotified = false
    end
end)


-----------------------------------------------------------------------------------------------------------------------------------------------------

-- Beast Tab Content --

-- Boxes --
local BeastESPBox = BeastTab:AddLeftGroupbox("ESP", "eye")
local TPtoPlayerBox = BeastTab:AddRightGroupbox("Teleport to Survivor", "loader-pinwheel")
local BeastNotifBox = BeastTab:AddLeftGroupbox("Notifications", "message-square-more")


local SurvivorESPConnection = nil
local survivorLastCheck = 0

local SurvivorESP = BeastESPBox:AddToggle("SurvivorESP", {
    Text = "Highlight Survivors",
    Default = false,
    Tooltip = "Highlights all current Survivors.",
    Callback = function(Value)
        if Value then
            -- Notify that ESP is enabled
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Survivor ESP Enabled ‚úÖ",
                Time = 5
            })

            local function applyESP()
                for _, plr in pairs(Players:GetPlayers()) do
                    if plr ~= LocalPlayer then
                        local char = plr.Character
                        local stats = plr:FindFirstChild("TempPlayerStatsModule")
                        if char and stats then
                            local beastTag = stats:FindFirstChild("IsBeast")
                            if beastTag and not beastTag.Value then
                                if not char:FindFirstChild("SurvivorESPHighlight") then
                                    local hi = Instance.new("Highlight")
                                    hi.Name = "SurvivorESPHighlight"
                                    hi.FillColor = Color3.fromRGB(255, 0, 255) -- Magenta
                                    hi.FillTransparency = 0.25
                                    hi.OutlineTransparency = 1
                                    hi.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                                    hi.Parent = char
                                end
                            end
                        end
                    end
                end
            end

            applyESP()

            SurvivorESPConnection = RunService.Heartbeat:Connect(function(deltaTime)
                survivorLastCheck = survivorLastCheck + deltaTime
                if survivorLastCheck >= 1 then -- every 1 second
                    applyESP()
                    survivorLastCheck = 0
                end
            end)

        else
            -- Notify that ESP is disabled
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Survivor ESP Disabled ‚ùå",
                Time = 5
            })

            -- Remove all highlights
            if SurvivorESPConnection then
                SurvivorESPConnection:Disconnect()
                SurvivorESPConnection = nil
            end

            for _, plr in pairs(Players:GetPlayers()) do
                if plr.Character then
                    local hi = plr.Character:FindFirstChild("SurvivorESPHighlight")
                    if hi then hi:Destroy() end
                end
            end
        end
    end
})


--------------------------------------------------------------------------------------------------------------------------------------------------
local FreezeESPConnection = nil
local lastCheck = 0

local FreezeESP = BeastESPBox:AddToggle("FreezeESP", {
    Text = "Highlight Freeze Pods",
    Default = false,
    Tooltip = "Highlights all Freeze Pods.",
    Callback = function(Value)
        if Value then
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Freeze Pod ESP enabled ‚úÖ",
                Time = 5
            })

            local function updateFreezePods()
                for _, map in pairs(Workspace:GetChildren()) do
                    if map:IsA("Model") then
                        for _, obj in pairs(map:GetChildren()) do
                            if obj:IsA("Model") and obj.Name == "FreezePod" then
                                local old = obj:FindFirstChild("FreezeESPHighlight")
                                if not old then
                                    local hi = Instance.new("Highlight")
                                    hi.Name = "FreezeESPHighlight"
                                    hi.FillColor = Color3.fromRGB(0, 255, 255) -- cyan
                                    hi.FillTransparency = 0.25
                                    hi.OutlineTransparency = 1 -- removes white outline
                                    hi.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                                    hi.Parent = obj
                                end
                            end
                        end
                    end
                end
            end

            updateFreezePods()

            FreezeESPConnection = RunService.Heartbeat:Connect(function(deltaTime)
                lastCheck = lastCheck + deltaTime
                if lastCheck >= 1 then -- every 1 second
                    updateFreezePods()
                    lastCheck = 0
                end
            end)

        else
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Freeze Pod ESP disabled ‚ùå",
                Time = 5
            })

            if FreezeESPConnection then
                FreezeESPConnection:Disconnect()
                FreezeESPConnection = nil
            end

            for _, map in pairs(Workspace:GetChildren()) do
                if map:IsA("Model") then
                    for _, obj in pairs(map:GetChildren()) do
                        if obj:IsA("Model") and obj.Name == "FreezePod" then
                            local hi = obj:FindFirstChild("FreezeESPHighlight")
                            if hi then
                                hi:Destroy()
                            end
                        end
                    end
                end
            end
        end
    end
})

-------------------------------------------------------------------------------------------------------------------------------------------------------

-- TptoPlayerBox Content --
-- Player dropdown (automatically updates with players)
local PlayerList = TPtoPlayerBox:AddDropdown("PlayerList", {
    SpecialType = "Player",
    Text = "Select Survivor",
    Multi = false,
    ExcludeLocalPlayer = true
})



local TPtoPlayer = TPtoPlayerBox:AddButton({
    Text = "Teleport to Selected Survivor",
    Tooltip = "Teleport to the player you selected above.",
    Func = function()
        local character = LocalPlayer.Character
        local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
        if not humanoidRootPart then return end

        local selectedPlayer = PlayerList.Value
        if not selectedPlayer or not selectedPlayer.Character or not selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            Library:Notify({
                Title = "Riftware - FTF",
                Description = (selectedPlayer and selectedPlayer.Name or "Player") .. " has left the game, select a new player‚ùå",
                Time = 5
            })
            return
        end

        -- Teleport to the selected player's HumanoidRootPart
        humanoidRootPart.CFrame = selectedPlayer.Character.HumanoidRootPart.CFrame

        -- Notify
        Library:Notify({
            Title = "Riftware - FTF",
            Description = "Teleported to " .. selectedPlayer.Name .. " ‚úÖ",
            Time = 5
        })
    end,
})


-------------------------------------------------------------------------------------------------------------------------------------------------------

-- BeastNotifBox Content --
local NearSurvivorConnection = nil
local notified = false -- track if notification has already fired
local NEAR_DISTANCE = 50 -- studs

local NearSurvivor = BeastNotifBox:AddToggle("NearSurvivor", {
    Text = "Near Survivor Notification",
    Default = false,
    Tooltip = "Sends a Notification if you're near a player.",
    Callback = function(Value)
        if Value then
            -- Notify that it's enabled
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Near Survivor Notifications Enabled ‚úÖ",
                Time = 3
            })

            notified = false
            NearSurvivorConnection = RunService.Heartbeat:Connect(function()
                local character = LocalPlayer.Character
                local hrp = character and character:FindFirstChild("HumanoidRootPart")
                if not hrp then return end

                -- find the current beast to ignore
                local currentBeast = nil
                for _, plr in pairs(Players:GetPlayers()) do
                    local stats = plr:FindFirstChild("TempPlayerStatsModule")
                    if stats then
                        local beastTag = stats:FindFirstChild("IsBeast")
                        if beastTag and beastTag.Value then
                            currentBeast = plr
                            break
                        end
                    end
                end

                for _, plr in pairs(Players:GetPlayers()) do
                    if plr ~= LocalPlayer and plr ~= currentBeast and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                        local dist = (hrp.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                        if dist <= NEAR_DISTANCE then
                            if not notified then
                                notified = true
                                Library:Notify({
                                    Title = "Riftware - FTF",
                                    Description = "Survivor is nearby! Go get 'em! üëÄ",
                                    Time = 5
                                })
                            end
                            return -- stop checking others once one is near
                        end
                    end
                end

                -- reset notified if no survivors are near
                notified = false
            end)
        else
            -- Notify that it's disabled
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Near Survivor Notifications Disabled ‚ùå",
                Time = 3
            })

            if NearSurvivorConnection then
                NearSurvivorConnection:Disconnect()
                NearSurvivorConnection = nil
            end
            notified = false
        end
    end
})


-------------------------------------------------------------------------------------------------------------------------------------------------------

-- Misc Tab Content --

-- Boxes --
local UsefulThings = MiscTab:AddLeftGroupbox("Useful", "check")
local DevTools = MiscTab:AddRightGroupbox("Tools", "hammer")

local RemoveFogEnabled = false
local currentFogSettings = nil

local RemoveFog = UsefulThings:AddToggle("RemoveFog", {
    Text = "Remove Fog",
    Default = false,
    Tooltip = "Removes all Fog in the world.",
    Callback = function(Value)
        RemoveFogEnabled = Value
        local atmosphere = game:GetService("Lighting"):FindFirstChildOfClass("Atmosphere")
        if atmosphere then
            if Value then
                -- Store current fog settings every time it's enabled
                currentFogSettings = {
                    Density = atmosphere.Density,
                    Offset = atmosphere.Offset,
                    Color = atmosphere.Color,
                    Decay = atmosphere.Decay
                }

                atmosphere.Density = 0
                atmosphere.Offset = 0
                Library:Notify({
                    Title = "Riftware - FTF",
                    Description = "Fog removed! üåû",
                    Time = 5
                })
            else
                -- Restore fog settings from when it was last enabled
                if currentFogSettings then
                    atmosphere.Density = currentFogSettings.Density
                    atmosphere.Offset = currentFogSettings.Offset
                    atmosphere.Color = currentFogSettings.Color
                    atmosphere.Decay = currentFogSettings.Decay
                end

                Library:Notify({
                    Title = "Riftware - FTF",
                    Description = "Fog restored! üå´Ô∏è",
                    Time = 5
                })
            end
        end
    end
})

-- Constantly enforce fog removal if toggle is active
game:GetService("RunService").Heartbeat:Connect(function()
    if RemoveFogEnabled then
        local atmosphere = game:GetService("Lighting"):FindFirstChildOfClass("Atmosphere")
        if atmosphere then
            atmosphere.Density = 0
        end
    end
end)



---------------------------------------------------------------------------------------------------------------------------

local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")

local savedDepthOfField = nil
RemoveBlur = UsefulThings:AddToggle("RemoveBlur", {
    Text = "Remove Blur",
    Default = false,
    Tooltip = "Removes all Blur in the World.",
    Callback = function(Value)
        if Value then
            -- Save original DepthOfFieldEffect once
            if not savedDepthOfField then
                local depthOfField = Lighting:FindFirstChildOfClass("DepthOfFieldEffect")
                if depthOfField then
                    savedDepthOfField = depthOfField:Clone()
                end
            end

            -- Continuously remove DepthOfField
            RemoveBlur.Connection = RunService.Heartbeat:Connect(function()
                local depthOfField = Lighting:FindFirstChildOfClass("DepthOfFieldEffect")
                if depthOfField then
                    depthOfField:Destroy()
                end
            end)

        else
            -- Stop removing
            if RemoveBlur.Connection then
                RemoveBlur.Connection:Disconnect()
                RemoveBlur.Connection = nil
            end

            -- Restore original DepthOfField
            if savedDepthOfField then
                -- Remove any existing DOF before restoring
                local existingDOF = Lighting:FindFirstChildOfClass("DepthOfFieldEffect")
                if existingDOF then existingDOF:Destroy() end

                savedDepthOfField.Parent = Lighting
                savedDepthOfField = nil
            end
        end
    end
})

-----------------------------------------------------------------------------------------------------------------------------------

local Lighting = game:GetService("Lighting")

-- Store original lighting settings so we can restore them later
local OriginalLighting = {
    Brightness = Lighting.Brightness,
    ClockTime = Lighting.ClockTime,
    FogEnd = Lighting.FogEnd,
    GlobalShadows = Lighting.GlobalShadows,
    Ambient = Lighting.Ambient
}

local Fullbright = UsefulThings:AddToggle("UsefulThings", {
    Text = "Enable Fullbright",
    Default = false,
    Tooltip = "Brightens the entire World.",
    Callback = function(Value)
        if Value then
            -- Enable Fullbright
            Lighting.Brightness = 2
            Lighting.ClockTime = 14 -- daytime
            Lighting.FogEnd = 100000
            Lighting.GlobalShadows = false
            Lighting.Ambient = Color3.fromRGB(255, 255, 255)
        else
            -- Restore original lighting
            Lighting.Brightness = OriginalLighting.Brightness
            Lighting.ClockTime = OriginalLighting.ClockTime
            Lighting.FogEnd = OriginalLighting.FogEnd
            Lighting.GlobalShadows = OriginalLighting.GlobalShadows
            Lighting.Ambient = OriginalLighting.Ambient
        end
    end
})

---------------------------------------------------------------------------------------------------------------------------------

local CameraUnlockEnabled = false

local CameraUnlock = UsefulThings:AddToggle("CameraUnlock", {
    Text = "Unlock Camera",
    Default = false,
    Tooltip = "Unlocks the max zoom on your camera.",
    Callback = function(Value)
        CameraUnlockEnabled = Value
        if Value then
            Players.LocalPlayer.CameraMaxZoomDistance = 100000
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Camera unlocked! üîì",
                Time = 5
            })
        else
            Players.LocalPlayer.CameraMaxZoomDistance = 10
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Camera locked to default. üîí",
                Time = 5
            })
        end
    end
})

-- Constantly enforce max zoom while toggle is active
RunService.RenderStepped:Connect(function()
    if CameraUnlockEnabled then
        Players.LocalPlayer.CameraMaxZoomDistance = 100000
    end
end)

-- Constantly enforce max zoom while toggle is active
RunService.RenderStepped:Connect(function()
    if CameraUnlockEnabled and Camera then
        Camera.MaxZoomDistance = 999999
    end
end)


------------------------------------------------------------------------------------------------------------------------
UsefulThings:AddDivider()

local RespawnPlayer = UsefulThings:AddButton({
    Text = "Respawn Character",
    Tooltip = "Respawns your character.",
    Func = function()
        local character = LocalPlayer.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.Health = 0 -- force respawn
                Library:Notify({
                    Title = "Riftware - FTF",
                    Description = "Character respawned! ‚úÖ",
                    Time = 5
                })
            end
        end
    end,
})

----------------------------------------------------------------------------------------------------------------------------------------

local ShowPosEnabled = false
local LocationGUI = nil
local RunConn = nil

local ShowPos = DevTools:AddToggle("ShowPos", {
    Text = "Show Position",
    Default = false,
    Tooltip = "Shows your current position.",
    Callback = function(Value)
        ShowPosEnabled = Value

        if Value then
            -- Notification for enabling
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Show Position Enabled ‚úÖ",
                Time = 3
            })

            local player = game:GetService("Players").LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:WaitForChild("HumanoidRootPart")

            -- Create GUI
            LocationGUI = Instance.new("ScreenGui")
            LocationGUI.Name = "RiftwareLocationDisplay"
            LocationGUI.ResetOnSpawn = false
            LocationGUI.Parent = game:GetService("CoreGui")

            local frame = Instance.new("Frame")
            frame.Size = UDim2.new(0, 220, 0, 40)
            frame.Position = UDim2.new(0, 50, 0.4, -20) -- slightly left of center
            frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            frame.BackgroundTransparency = 0.2
            frame.BorderSizePixel = 0
            frame.Parent = LocationGUI

            -- Rounded corners
            local corner = Instance.new("UICorner")
            corner.CornerRadius = UDim.new(0, 10)
            corner.Parent = frame

            -- Gradient
            local grad = Instance.new("UIGradient")
            grad.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 255)),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 255))
            }
            grad.Rotation = 45
            grad.Parent = frame

            -- Stroke
            local stroke = Instance.new("UIStroke")
            stroke.Thickness = 2
            stroke.Color = Color3.fromRGB(255, 105, 180)
            stroke.Parent = frame

            -- TextLabel
            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1, -10, 1, -10)
            label.Position = UDim2.new(0, 5, 0, 5)
            label.BackgroundTransparency = 1
            label.TextColor3 = Color3.fromRGB(255, 255, 255)
            label.Font = Enum.Font.Gotham
            label.TextScaled = true
            label.TextXAlignment = Enum.TextXAlignment.Left
            label.TextYAlignment = Enum.TextYAlignment.Center
            label.Parent = frame

            -- Make frame draggable
            local UserInputService = game:GetService("UserInputService")
            local dragging = false
            local dragInput, mousePos, framePos

            frame.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = true
                    mousePos = input.Position
                    framePos = frame.Position

                    input.Changed:Connect(function()
                        if input.UserInputState == Enum.UserInputState.End then
                            dragging = false
                        end
                    end)
                end
            end)

            frame.InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement then
                    dragInput = input
                end
            end)

            UserInputService.InputChanged:Connect(function(input)
                if dragging and input == dragInput then
                    local delta = input.Position - mousePos
                    frame.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X,
                                               framePos.Y.Scale, framePos.Y.Offset + delta.Y)
                end
            end)

            -- Update loop
            RunConn = game:GetService("RunService").RenderStepped:Connect(function()
                if hrp and character and character.Parent then
                    label.Text = string.format("X: %d | Y: %d | Z: %d",
                        math.floor(hrp.Position.X),
                        math.floor(hrp.Position.Y),
                        math.floor(hrp.Position.Z)
                    )
                end
            end)

        else
            -- Notification for disabling
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Show Position Disabled ‚ùå",
                Time = 3
            })

            -- Disable GUI
            if RunConn then
                RunConn:Disconnect()
                RunConn = nil
            end
            if LocationGUI then
                LocationGUI:Destroy()
                LocationGUI = nil
            end
        end
    end
})


----------------------------------------------------------------------------------------------------------------------------------------

local ShowDirEnabled = false
local DirectionGUI = nil
local DirRunConn = nil

local ShowDir = DevTools:AddToggle("ShowDir", {
    Text = "Show Direction",
    Default = false,
    Tooltip = "Shows what direction your currently facing.",
    Callback = function(Value)
        ShowDirEnabled = Value

        if Value then
            -- Notification for enabling
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Show Direction Enabled ‚úÖ",
                Time = 3
            })

            local player = game:GetService("Players").LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:WaitForChild("HumanoidRootPart")

            -- Create GUI
            DirectionGUI = Instance.new("ScreenGui")
            DirectionGUI.Name = "RiftwareDirectionDisplay"
            DirectionGUI.ResetOnSpawn = false
            DirectionGUI.Parent = game:GetService("CoreGui")

            local frame = Instance.new("Frame")
            frame.Size = UDim2.new(0, 220, 0, 40)
            frame.Position = UDim2.new(0, 50, 0.35, -20) -- above location GUI
            frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            frame.BackgroundTransparency = 0.2
            frame.BorderSizePixel = 0
            frame.Parent = DirectionGUI

            -- Rounded corners
            local corner = Instance.new("UICorner")
            corner.CornerRadius = UDim.new(0, 10)
            corner.Parent = frame

            -- Gradient
            local grad = Instance.new("UIGradient")
            grad.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 255)),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 255))
            }
            grad.Rotation = 45
            grad.Parent = frame

            -- Stroke
            local stroke = Instance.new("UIStroke")
            stroke.Thickness = 2
            stroke.Color = Color3.fromRGB(255, 105, 180)
            stroke.Parent = frame

            -- TextLabel
            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1, -10, 1, -10)
            label.Position = UDim2.new(0, 5, 0, 5)
            label.BackgroundTransparency = 1
            label.TextColor3 = Color3.fromRGB(255, 255, 255)
            label.Font = Enum.Font.Gotham
            label.TextScaled = true
            label.TextXAlignment = Enum.TextXAlignment.Left
            label.TextYAlignment = Enum.TextYAlignment.Center
            label.Parent = frame

            -- Make frame draggable
            local UserInputService = game:GetService("UserInputService")
            local dragging = false
            local dragInput, mousePos, framePos

            frame.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = true
                    mousePos = input.Position
                    framePos = frame.Position

                    input.Changed:Connect(function()
                        if input.UserInputState == Enum.UserInputState.End then
                            dragging = false
                        end
                    end)
                end
            end)

            frame.InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement then
                    dragInput = input
                end
            end)

            UserInputService.InputChanged:Connect(function(input)
                if dragging and input == dragInput then
                    local delta = input.Position - mousePos
                    frame.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X,
                                               framePos.Y.Scale, framePos.Y.Offset + delta.Y)
                end
            end)

            -- Update loop
            DirRunConn = game:GetService("RunService").RenderStepped:Connect(function()
                if hrp and character and character.Parent then
                    local lookVector = hrp.CFrame.LookVector
                    local angle = math.deg(math.atan2(lookVector.X, lookVector.Z))
                    local direction

                    -- Convert angle to compass direction
                    if angle < 0 then angle = angle + 360 end
                    if angle >= 337.5 or angle < 22.5 then direction = "North"
                    elseif angle < 67.5 then direction = "North-East"
                    elseif angle < 112.5 then direction = "East"
                    elseif angle < 157.5 then direction = "South-East"
                    elseif angle < 202.5 then direction = "South"
                    elseif angle < 247.5 then direction = "South-West"
                    elseif angle < 292.5 then direction = "West"
                    else direction = "North-West"
                    end

                    label.Text = "Facing: " .. direction
                end
            end)

        else
            -- Notification for disabling
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Show Direction Disabled ‚ùå",
                Time = 3
            })

            -- Disable GUI
            if DirRunConn then
                DirRunConn:Disconnect()
                DirRunConn = nil
            end
            if DirectionGUI then
                DirectionGUI:Destroy()
                DirectionGUI = nil
            end
        end
    end
})

----------------------------------------------------------------------------------------------------------------------------------------
local WatermarkGUI = nil
local WatermarkRunning = false
local fpsUpdaterRunning = false

Watermark = DevTools:AddToggle("Watermark", {
    Text = "Watermark",
    Default = true,
    Tooltip = "Enable/Disable the watermark",
    Callback = function(Value)
        if Value then
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Watermark Enabled ‚úÖ",
                Time = 3
            })

            if not WatermarkGUI then
                -- Create watermark GUI
                WatermarkGUI = Instance.new("ScreenGui")
                WatermarkGUI.Name = "RiftwareWatermark"
                WatermarkGUI.ResetOnSpawn = false
                WatermarkGUI.Parent = game:GetService("CoreGui")

                local frame = Instance.new("Frame")
                frame.Name = "Frame"
                frame.Size = UDim2.new(0, 400, 0, 35)
                frame.Position = UDim2.new(0, 10, 0, 10)
                frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
                frame.BorderSizePixel = 0
                frame.Parent = WatermarkGUI

                local gradient = Instance.new("UIGradient")
                gradient.Color = ColorSequence.new{
                    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 255)),
                    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 255))
                }
                gradient.Rotation = 45
                gradient.Parent = frame

                local uicorner = Instance.new("UICorner")
                uicorner.CornerRadius = UDim.new(0, 12)
                uicorner.Parent = frame

                local stroke = Instance.new("UIStroke")
                stroke.Color = Color3.fromRGB(255, 0, 255)
                stroke.Thickness = 2
                stroke.Parent = frame

                local textLabel = Instance.new("TextLabel")
                textLabel.Name = "TextLabel"
                textLabel.Size = UDim2.new(1, -20, 1, -10)
                textLabel.Position = UDim2.new(0, 10, 0, 5)
                textLabel.BackgroundTransparency = 1
                textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                textLabel.TextScaled = true
                textLabel.Font = Enum.Font.SourceSansBold
                textLabel.TextStrokeTransparency = 0.75
                textLabel.TextSize = 18
                textLabel.Text = "Riftware | " .. LocalPlayer.Name .. " | 0 FPS"
                textLabel.Parent = frame

                -- Draggable setup
                local dragging = false
                local dragInput, dragStart, startPos

                local function update(input)
                    local delta = input.Position - dragStart
                    frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
                                               startPos.Y.Scale, startPos.Y.Offset + delta.Y)
                end

                frame.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 then
                        dragging = true
                        dragStart = input.Position
                        startPos = frame.Position

                        input.Changed:Connect(function()
                            if input.UserInputState == Enum.UserInputState.End then
                                dragging = false
                            end
                        end)
                    end
                end)

                frame.InputChanged:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseMovement then
                        dragInput = input
                    end
                end)

                game:GetService("UserInputService").InputChanged:Connect(function(input)
                    if dragging and input == dragInput then
                        update(input)
                    end
                end)

                WatermarkRunning = true
            else
                WatermarkGUI.Enabled = true
                WatermarkRunning = true
            end

            -- Start FPS updater loop only once
            if not fpsUpdaterRunning then
                fpsUpdaterRunning = true
                spawn(function()
                    while true do
                        if WatermarkRunning and WatermarkGUI then
                            local fps = math.floor(1 / RunService.RenderStepped:Wait())
                            local label = WatermarkGUI:FindFirstChild("Frame") and WatermarkGUI.Frame:FindFirstChild("TextLabel")
                            if label then
                                label.Text = "Riftware | " .. LocalPlayer.Name .. " | " .. fps .. " FPS"
                            end
                        else
                            RunService.RenderStepped:Wait()
                        end
                        wait(0.2)
                    end
                end)
            end
        else
            Library:Notify({
                Title = "Riftware - FTF",
                Description = "Watermark Disabled ‚ùå",
                Time = 3
            })

            if WatermarkGUI then
                WatermarkGUI.Enabled = false
                WatermarkRunning = false
            end
        end
    end
})

-- Automatically enable the watermark on hub load
Watermark.Callback(true)




------------------------------------------------------------------------------------------------------------------------------------------------------------

-- Credits & Support Tab Content --

-- Boxes --
local CreditsBox = CreditsTab:AddLeftGroupbox("Credits", "users")
local SupportBox = CreditsTab:AddRightGroupbox("Support", "shield-question-mark")
local UpdateBox = CreditsTab:AddLeftGroupbox("Update Log", "arrow-down-to-line")

-- Credits Box Content --

local ScriptDev = CreditsBox:AddLabel("Script Developer: Rezorn")
CreditsBox:AddDivider()
local ScriptProducer = CreditsBox:AddLabel("Script Producer: Riftware")
CreditsBox:AddDivider()
local TyObsidian = CreditsBox:AddLabel({
    Text = "Ty to Obsidian for providing the UI Library!",
    DoesWrap = true
})

------------------------------------------------------------------------------------------------------------------------------------------------------------

-- Support Box Content --
local SupportLabel = SupportBox:AddLabel({
    Text = "Please make a ticket in #Tickets!",
    DoesWrap = true
})


----------------------------------------------------------------------------------------------------------------------------------------------------
local Update1 = UpdateBox:AddLabel("V1.0: Hub created")
UpdateBox:AddDivider()
local Update2 = UpdateBox:AddLabel("V1.1: Fixed FPS drop Issue")
UpdateBox:AddDivider()
local Update3 = UpdateBox:AddLabel("V1.2: Fixed broken camera and UI")
UpdateBox:AddDivider()
local Update4 = UpdateBox:AddLabel({
    Text = "V1.3: Fixed Watermark FPS issue, fixed remove fog issue, added Remove Blur + Full Bright, added Discord advertisements on signs in lobby",
    DoesWrap = true
})
UpdateBox:AddDivider()
local Update5 = UpdateBox:AddLabel({
    Text = "V1.4: Fixed Player Tab toggle options not working after death, made Misc tab content undetectable",
    DoesWrap = true
})
UpdateBox:AddDivider()
local Update6 = UpdateBox:AddLabel({
    Text = "V1.5: Removed lobby advertisements as it was causing bugs.",
    DoesWrap = true
})
